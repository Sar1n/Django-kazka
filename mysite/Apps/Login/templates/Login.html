{% extends "wrapper.html" %}

{% block content %}
<div class="jumbotron">

  <div>
      <script>
          function getCookie(name) {
            var cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                var cookies = document.cookie.split(';');
                for (var i = 0; i < cookies.length; i++) {
                    var cookie = cookies[i].trim();
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
          }
        var csrftoken = getCookie('csrftoken');


        function csrfSafeMethod(method) {
            // these HTTP methods do not require CSRF protection
            return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
        }
        $.ajaxSetup({
            beforeSend: function(xhr, settings) {
                if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                    xhr.setRequestHeader("X-CSRFToken", csrftoken);
                }
            }
        });
      </script>
  </div> <!--CSRF TOKEN HERE-->
  {% csrf_token %}
  
  <script type="text/javascript">
      var csrftoken = jQuery("[name=csrfmiddlewaretoken]").val();
  </script>


    <div class="container">
      <h1>Тестим</h1>
      Приложение
      <p> 

          <div class="green">
          <a>
            <button id='btn-add' class="btn btn-success btn-lg" >Add static value to db</button>
          </a>
          </div>
          

          <div class="text">
          <textarea name="Sentence" cols="40" rows="3" id='textarea'></textarea>
          </div>


          <div class="textadd">
          <a>
            <button id='btn-text' class="btn btn-success btn-lg" >Add Sentence to db</button>
          </a>
          </div>


          <div class="textreveal">
            <a>
              <button id='btn-reveal' class="btn btn-success btn-lg" >Reveal Text</button>
            </a>
            </div>


          <a>
            Here will be sentence
          </a>
      </p>
    </div>
</div>

<div>
  <script type="text/javascript">
    $('#btn-add').click
    (
        function()
        {
            $.ajax
            (
                {
                    url: "ajax/testadd/",
                    type: "POST",
                    success: function()
                    {
                        alert("good");
                    }
                }
            )
        .fail(function() {
        alert("fail");
        });
        }
    );
  </script>

<script type="text/javascript">
  $('#btn-text').click
  (
      function()
      {
          var textdata = document.getElementById("textarea").value
          $.ajax
          (
              {
                  url: "ajax/textadd/",
                  type: "POST",
                  data: {"textdata": textdata},
                  success: function()
                  {
                      alert("good");
                  }
              }
          )
      .fail(function() {
      alert("fail");
      });
      }
  );
</script>


<script type="text/javascript">
  $('#btn-reveal').click
  (
      function()
      {
          $.ajax
          (
              {
                  url: "ajax/textreveal/",
                  type: "GET",
                  //dataType: 'json',
                  success: function(data)
                  {
                      alert(data);
                  }
              }
          )
      .fail(function() {
      alert("fail");
      });
      }
  );
</script>

</div>
{% endblock %}